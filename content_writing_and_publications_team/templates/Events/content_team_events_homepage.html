<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Events | IEEE NSU Student Branch</title>
  <link rel="icon" href="{% static 'logos/logo.gif' %}" />
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

  {% block common_css %}
  {% include "common_css.html" %}
  {% endblock common_css %}

  <link rel="stylesheet" href="{% static 'newTable.css' %}" type="text/css" />


  <style>
    body,
    html {
      margin: 0;
      background-color: white;
      align-items: center;
      justify-content: center;
    }

    .row {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    }

    /* Styles for the lightbox overlay */
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 999;
    }

    .row {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    }

    .btn-container {
      text-align: center;
    }

    .btn {
      max-width: 100%;
      width: auto;
      display: inline-block;
      white-space: normal;
      /* Allow text to wrap within the button */
      word-wrap: break-word;
      /* Break long words if necessary */
      font-size: 16px;
      /* Adjust the font size as needed */
    }

    /* table by shohan */

    .container {
        width: 80%;
        max-width: 1200px;
        margin: 0 auto;
    }
      .table_box {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }


    table {
      max-height: 50px;
      overflow: auto;
      /* width: 1200px !important; */
    }

    table th {
      color: rgb(0, 0, 0, .9);
        background-color: #F0F0F0;
    }

    table tr {
      background-color: #fff !important;
    }

    table tr:hover {
      background-color: #f9f9f9 !important;
    }

  
    .table-responsive {
      overflow-x: auto;
      overflow-y: clip;
      max-height: auto;
    }

    .table-responsive th {
      position: sticky;
      top: -2px;
    }

    /* Media query for smaller screens (adjust the breakpoint as needed) */
    @media (max-width: 768px) {
      .btn {
        width: 100%;
        /* Make the button full width on smaller screens */
      }
    }

    @import url('https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese');


    .images {
      width: 50%;
      margin: 20px 0;
      display: flex;
    }

    .images img {
      width: 100%;
      height: 100px;
      object-fit: cover;
      margin: 2px;
      padding: 2px;
      float: left;
      border: .5px solid #ddd;
      cursor: pointer;
      transition: .8s ease-in-out;
    }

    .fullscreen-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .fullscreen-image {
      max-width: 80%;
      max-height: 80%;
      cursor: pointer;
    }

    .remove-button {
      position: absolute;
      top: 5px;
      right: 5px;
      background: red;
      color: white;
      border: none;
      padding: 5px;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }

    .images-image .remove-button {
      opacity: 1;
    }

    .images img:hover {
      opacity: .5;
    }

    #burger {
      border: none;
      background: transparent;
    }


    .event_name_column_content {
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: #00629B;
      max-width: 700px;
      font-weight: bold;
    }

    /* table design by shohan */
    .search_bar {
      text-decoration: none;
      border-radius: 6px;
      border: 1px solid transparent;
      height: 26px;
      padding: 16px;
      border: 1px solid #D9D9D9;
    }

    .pagination-container {
  display: flex;
  justify-content: center;
  margin-top: 20px;
         }
         .pagination li {
    border-radius: 4px !important;
  }

       .pagination li.disabled {
  pointer-events: none; /* Prevents click */
  color: #aaa;
  cursor: not-allowed;
}
  

    @media (max-width: 1600px) {
      .event_name_column_content {
        max-width: 500px;
      }
    }


    @media (max-width: 1300px) {
      .event_name_column_content {
        max-width: 300px;
      }
    }

    @media (max-width: 768px) {
      .event_name_column_content {
        max-width: 200px;
      }
    }

    .app-body {
      /* justify-content: center; */
      /* margin-left: 15%;
      margin-right: 15%; */
      width: 100%;
    }

    @media (max-width: 760px) {
      .app-body {
        margin-left: 5%;
        margin-right: 5%;
      }
    }
    @media screen and (max-width: 450px) {
      .container{
          margin: auto;
          width: 100%;
      }
    }
  </style>
</head>

<body>
  <!-- ############ LAYOUT START-->
  <div class="app" id="app">

    <!-- aside -->
    <div id="aside" class="app-aside modal nav-dropdown">

      {% block sidebar %}
      {% include 'users/sidebar.html' %}
      {% endblock %}

    </div>
    <!-- aside end -->

    <!-- navbar content -->
    <div id="content" class="app-content box-shadow-z0" role="main">
      {% block navbar %}
      {% include 'content_navbar.html' %}
      {% endblock navbar %}

    </div>
    <!--navbar content-->

    <!-- ############ PAGE START-->
    <div ui-view class="app-body" id="view">


      <br>
      <h2 style="justify-content:center;text-align:center;margin-bottom:15px;"><span><b>Events</b></span> organised by
        <span style="color:#00629B;">IEEE NSU Student Branch</b></span>
      </h2>
      <!--Events Table-->
      <div style="text-align:center; margin-top:30px;">
        <div class="container" style="justify-content:center;">
          <div class="header_wrap">
            <div class="num_rows">
              <div class="form-group">
                <!--		Show Numbers Of Rows 		-->
                <select class="form-control" name="state" id="maxRows"
                  style="border: 1px solid #D9D9D9; border-radius: 6px; height: 34px;">

                  <option value="10">10</option>
                  <option value="15">15</option>
                  <option value="20">20</option>
                  <option value="50">50</option>
                  <option value="5000">Show All Rows</option>
                </select>

              </div>
            </div>
            <div class="tb_search">
              <input type="text" id="search_input_all" onkeyup="FilterkeyWord_all_table()" placeholder="Search.."
                class="form-control search_bar">
            </div>
          </div>
          <div class="table-responsive table_box">
            <table class="table table-striped table-class" id="table-id">

              <thead>
                <tr>
                  <th>SL</th>
                  <th>Name</th>
                  <th>Organiser</th>
                  <th>Date</th>

                </tr>
              </thead>
              <tbody>
                <form method="POST">
                  {% for event in events_of_insb_only %}
                  <tr>
                    <td>{{ forloop.counter }}</td>
                    <td style="color:#00629B;">
                      <!--<button id="burger" type="button" value={{event.id}} name="result"  data-toggle="modal"  onclick="openModal('{{event.id}}')"  data-target="#modal" ui-target="#animate">{{event.event_name}}</button>
                -->
                      <a class="event_name_column_content"
                        href="{% url 'content_writing_and_publications_team:event_form' event.id %}">
                        {{event.event_name}}</a><br>
                    </td>
                    <td>{{ event.event_organiser.group_name }}</td>
                    <td>{% if event.event_date and event.start_date == None %}{{ event.event_date }}{% else %}{{ event.start_date|date:"M. d, Y"  }}{% endif %}</td>

                  </tr>
                  {% endfor %}
                </form>


              <tbody>
            </table>
          </div>
          <!--		Start Pagination -->
       <div class='pagination-container'>
            <nav>
              <ul class="pagination"> 
                <!--	Here the JS Function Will Add the Rows -->
               </ul>
            </nav>
          </div> 
          <div class="rows_count">Showing 11 to 20 of 91 entries</div>

        </div>
      </div>

      <!--Events table end-->


    </div>
    <!--PAGE END-->





    <!--Theme Switcher-->

    {% block theme_switcher %}
    {% include "theme_switcher.html" %}
    {% endblock theme_switcher %}

  </div>
  <!-- app end-->

  {% block common_js %}
  {% include "common_js.html" %}
  {% endblock common_js %}
  <script src="{% static 'script/jquery.js' %}"></script>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
   $(document).ready(function () {
  function paginateTable(table, maxRows) {
    const totalRows = $(table + ' tbody tr').length;
    const totalPages = Math.ceil(totalRows / maxRows);
    const pagination = $('.pagination');
    const rowsCountBox = $('.rows_count');

    function showPage(page) {
      const start = (page - 1) * maxRows;
      const end = start + maxRows;

      $(table + ' tbody tr').hide().slice(start, end).show();

      rowsCountBox.text(`Showing ${start + 1} to ${Math.min(end, totalRows)} of ${totalRows} entries`);
      renderPagination(page);
    }

    function renderPagination(currentPage) {
      let pageHTML = '';

      if (maxRows >= totalRows) {
        // Hide pagination completely
        pagination.html('');
        rowsCountBox.text(`Showing 1 to ${totalRows} of ${totalRows} entries`);
        return;
      }

      // Prev Button
      pageHTML += `<li data-page="prev" class="${currentPage === 1 ? 'disabled' : ''}">« Prev</li>`;

      // Always show page 1
      if (currentPage > 2) {
        pageHTML += `<li data-page="1">1</li>`;
      }

      // Left dots
      if (currentPage > 3) {
        pageHTML += `<li class="disabled">...</li>`;
      }

      // Page before current
      if (currentPage - 1 > 1) {
        pageHTML += `<li data-page="${currentPage - 1}">${currentPage - 1}</li>`;
      }

      // Current page
      pageHTML += `<li class="active" data-page="${currentPage}">${currentPage}</li>`;

      // Page after current
      if (currentPage + 1 < totalPages) {
        pageHTML += `<li data-page="${currentPage + 1}">${currentPage + 1}</li>`;
      }

      // Right dots
      if (currentPage < totalPages - 2) {
        pageHTML += `<li class="disabled">...</li>`;
      }

      // Last page
      if (currentPage < totalPages - 1) {
        pageHTML += `<li data-page="${totalPages}">${totalPages}</li>`;
      }

      // Next Button
      pageHTML += `<li data-page="next" class="${currentPage === totalPages ? 'disabled' : ''}">Next »</li>`;

      pagination.html(pageHTML);

      // Pagination click
      pagination.find('li').off('click').on('click', function () {
        if ($(this).hasClass('disabled') || $(this).hasClass('active')) return;

        let selected = $(this).data('page');
        if (selected === 'prev') selected = currentPage - 1;
        if (selected === 'next') selected = currentPage + 1;

        showPage(parseInt(selected));
      });
    }

    showPage(1);
  }

  $('#maxRows').on('change', function () {
    paginateTable('#table-id', parseInt($(this).val()));
  }).trigger('change');
});
// pagination end

    // SI SETTING
    /**$(function(){
      // Just to append id number for each row  
    default_index();
              
    });*/

    //ROWS SHOWING FUNCTION
    function showig_rows_count(maxRows, pageNum, totalRows) {
      //Default rows showing
      var end_index = maxRows * pageNum;
      var start_index = ((maxRows * pageNum) - maxRows) + parseFloat(1);
      var string = 'Showing ' + start_index + ' to ' + end_index + ' of ' + totalRows + ' entries';
      $('.rows_count').html(string);
    }

    // CREATING INDEX
    /**function default_index() {
      $('table tr:eq(0)').prepend('<th> SL No. </th>')

              var id = 0;

              $('table tr:gt(0)').each(function(){	
                id++
                $(this).prepend('<td>'+id+'</td>');
              });
    }*/

    // All Table search script
    function FilterkeyWord_all_table() {
      // Declare variables
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("search_input_all");
      filter = input.value.toUpperCase();
      table = document.getElementById("table-id");
      tr = table.getElementsByTagName("tr");

      // Loop through all table rows and hide those that don't match the search query
      for (i = 0; i < tr.length; i++) {
        // Skip the header row
        if (i === 0) continue;

        // Loop through all table cells in the current row
        var rowContainsSearchTerm = false;
        for (var j = 0; j < tr[i].cells.length; j++) {
          td = tr[i].cells[j];
          if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              rowContainsSearchTerm = true;
              break;
            }
          }
        }

        // Toggle the visibility of the row based on whether it contains the search term
        if (rowContainsSearchTerm) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  </script>




</body>

</html>